
local buff = CS.Step.buff
CS.Step.buff = buff

-- print(require("socket"));
-- print(require('rapidjson'))
-- print(require('pb'))

local pb = require('pb')
pb.load(CS.Step.pbBuff)

print(CS.Step.pbBuff)

local bytes = assert(pb.encode("hello.rpc", {code=999,from="sdjflasjgdlsdjklf"}))
print(pb.tohex(bytes))
CS.Step.buff = bytes

print('----------------------------------')
print(bytes);
print(CS.Step.buff)

local recvData = assert(pb.decode("hello.rpc", CS.Step.buff))

print(recvData.code);